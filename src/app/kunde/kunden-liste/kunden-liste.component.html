<Section>
  <div id="page-header-wrapper">
    <div>
      <a routerLink="/" style="text-decoration: none">
        <div style="display: grid; grid-template-columns: max-content 1fr; align-items: center">
          <span class="material-icons">chevron_left</span>
          <span style="font-size: 16px; color: #007fff">
            Zurück zur Startseite
          </span>
        </div>
      </a>
      <div id="page-title" style="margin-top: -7px">Kundenliste</div>
    </div>
    <div id="input-wrapper">
      <div>
        <input
          type="text"
          class="form-control"
          id="floatingInput"
          placeholder="nach Kunden suchen"
          [(ngModel)]="searchInputContent"
          (input)="change($event)"
        />
      </div>
    </div>
  </div>
  <hs-waiting *ngIf="waiting; else showErgebnis"></hs-waiting>
  <ng-template #showErgebnis>
    <div id="table-wrapper">
      <h6 *ngIf="!gefilterteKunden.length && !searchInputContent.length">
        Kunden nicht vorhanden
        <span style="color: #007fff">{{ searchInputContent }}</span>
      </h6>
      <h6 *ngIf="!gefilterteKunden.length && searchInputContent.length">
        Es gibt keinen Kunden zu Ihrer Eingabe:
        <span style="color: #007fff">{{ searchInputContent }}</span>
      </h6>
      <table
        class="table table-striped table-responsive-sm"
        style="margin-top: 45px"
        *ngIf="gefilterteKunden.length"
      >
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Kundenname</th>
          <th scope="col">E-mail</th>
          <th scope="col">Kategorie</th>
          <th scope="col">Newsletter Abo</th>
          <th scope="col" class="hide-on-small-device">Geburtsdatum</th>
          <th scope="col" class="hide-on-small-device">Homepage</th>
          <th scope="col" class="hide-on-small-device">Geschlecht</th>
          <th scope="col" class="hide-on-small-device">Famlienstand</th>
          <th scope="col" class="hide-on-small-device">InteressenType</th>
          <th scope="col" class="hide-on-small-device"></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let kunde of gefilterteKunden; index as idx">
          <th scope="row">{{ idx + 1 }}</th>
          <td>{{ kunde.nachname }}</td>
          <td>{{ kunde.email }}</td>
          <td>{{ kunde.kategorie }}</td>
          <td [style]="kunde.hasNewsletter ? 'color: green;' : 'color: red;'">
            {{ kunde.hasNewsletter ? "ja" : "nein" }}
          </td>
          <td class="hide-on-small-device">
            {{
            kunde.geburtsdatum.toLocaleDateString([], {
              day: "2-digit",
              month: "2-digit",
              year: "numeric"
            })
            }}
          </td>
          <td class="hide-on-small-device">{{ kunde.homepage }}</td>
          <td class="hide-on-small-device">
            {{ kunde.geschlecht.toLowerCase() }}
          </td>
          <td class="hide-on-small-device">
            {{ kunde.familienstand?.toLowerCase() }}
          </td>
          <td class="hide-on-small-device">{{ kunde.interessen }}</td>
          <td class="hide-on-small-device">
            <div style="display: flex; gap: 15px">
              <a routerLink="update/{{ kunde.id }}">
                <button type="button" class="btn btn-primary">
                  aktualisieren
                </button>
              </a>
              <button
                type="button"
                class="btn btn-danger"
                (click)="kundeLoechen(kunde.id!)"
              >
                löschen
              </button>
              <a routerLink="/kunden/alle/{{ kunde.id }}">
                <button type="button" class="btn btn-secondary">
                  Details
                </button>
              </a>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </ng-template>
</Section>
